# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π Studio App (Next.js 15) v3.0

–ù–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Studio –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å Next.js 15.

## ‚ú® –ù–æ–≤–æ–µ –≤ –≤–µ—Ä—Å–∏–∏ 3.0

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚úÖ **–û—à–∏–±–∫–∞ clientModules** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js 15
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ **–ü–∞–ø–∫–∞ public** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ **–ê–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ admin@taskverse.test/password
- ‚úÖ **API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π cookies
- ‚úÖ **Middleware** - —É–±—Ä–∞–Ω –ø—Ä–æ–±–ª–µ–º–Ω—ã–π middleware, –≤—ã–∑—ã–≤–∞–≤—à–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
- ‚úÖ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ—Ä—Ç–æ–≤** - —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –Ω–∞ –ø–æ—Ä—Ç—É 3000
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ password_hash)
- ‚úÖ **PM2 —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–∏–∫–ª—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∫–∞–∫ –≤ dev, —Ç–∞–∫ –∏ –≤ production
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ /auth (–∫–æ–¥ 307)
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –ê–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞:
- PowerShell 5.1+ –∏–ª–∏ PowerShell Core 7+
- Node.js 18+ –∏ npm
- SSH –∫–ª–∏–µ–Ω—Ç
- tar (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–æ–≤) –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PowerShell Compress-Archive

### –£–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:
- Ubuntu 20.04+ –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è Linux —Å–∏—Å—Ç–µ–º–∞
- Node.js 18+, npm
- PM2 (`npm install -g pm2`)
- PostgreSQL 12+
- SSH —Å–µ—Ä–≤–µ—Ä

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH –∫–ª—é—á–∞ (–µ—Å–ª–∏ –Ω–µ—Ç)
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id deployuser@157.180.87.32
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh deployuser@157.180.87.32

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
sudo -u postgres psql -c "CREATE USER userstudio WITH PASSWORD 'userstudio';"
sudo -u postgres psql -c "CREATE DATABASE userstudio OWNER userstudio;"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE userstudio TO userstudio;"
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```powershell
.\auto-deploy-nextjs15-v3.ps1
```

### –î–µ–ø–ª–æ–π —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
```powershell
.\auto-deploy-nextjs15-v3.ps1 -ServerIP "157.180.87.32" -Username "deployuser" -CleanServer -CreateAdmin
```

### –î–µ–ø–ª–æ–π –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞
```powershell
.\auto-deploy-nextjs15-v3.ps1 -CreateAdmin:$false
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∫—Ä–∏–ø—Ç–∞ v3.0
- `-ServerIP` - IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "157.180.87.32")
- `-Username` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è SSH (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "deployuser")
- `-DeployDir` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "/var/www/studio-app")
- `-ArchiveName` - –∏–º—è –∞—Ä—Ö–∏–≤–∞ –¥–ª—è –¥–µ–ø–ª–æ—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "studio-deploy-v3.tar.gz")
- `-CleanServer` - –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º (—Ñ–ª–∞–≥)
- `-CreateAdmin` - —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: $true)

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
deploy-configs/deploy-nextjs15/
‚îú‚îÄ‚îÄ auto-deploy-nextjs15-v3.ps1    # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è v3.0 (PowerShell)
‚îú‚îÄ‚îÄ deploy-script-v3.sh            # –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è v3.0 (Bash)
‚îú‚îÄ‚îÄ auto-deploy-nextjs15-v2.ps1    # –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ deploy-script.sh               # –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
‚îú‚îÄ‚îÄ README-v3.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è v3.0
‚îî‚îÄ‚îÄ README.md                      # –°—Ç–∞—Ä–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç v3.0

### –≠—Ç–∞–ø—ã –¥–µ–ø–ª–æ—è:

1. **–û—á–∏—Å—Ç–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
   - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3000
   - –û—á–∏—Å—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–µ–ø–ª–æ—è

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–∫–∏ `public` —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

3. **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ**
   - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `npm run build`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ —Å–±–æ—Ä–∫–∏

4. **–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞**
   - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ñ–∞–π–ª–æ–≤ (.next, src, public, package.json –∏ –¥—Ä.)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tar –∏–ª–∏ PowerShell Compress-Archive

5. **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**
   - –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ —á–µ—Ä–µ–∑ SCP
   - –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –¥–µ–ø–ª–æ—è v3.0

6. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
   - –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –∞—Ä—Ö–∏–≤–∞
   - –°–æ–∑–¥–∞–Ω–∏–µ/–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–ø–∫–∏ public
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ next.config.js –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏ clientModules
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
   - **–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (–Ω–æ–≤–æ–µ –≤ v3.0)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫ PM2

7. **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –í—ã–≤–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Å—Å—ã–ª–æ–∫

8. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** (–Ω–æ–≤–æ–µ –≤ v3.0)
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã /auth
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤

## üë®‚Äçüíº –ê–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–æ–≤–æ–µ –≤ v3.0)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
- **Email**: admin@taskverse.test
- **–ü–∞—Ä–æ–ª—å**: password
- **–†–æ–ª—å**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh deployuser@157.180.87.32 "cd /var/www/studio-app && node create-admin.js"
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://157.180.87.32:3000/
2. –í–∞—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ http://157.180.87.32:3000/auth
3. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ: admin@taskverse.test / password
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤–∞—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –≤ dashboard

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
```powershell
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh deployuser@157.180.87.32 "echo 'Connection OK'"
```

### –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
```powershell
# –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
npm run build
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å PM2
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
pm2 status
pm2 logs studio-nextjs15
pm2 restart studio-nextjs15
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π (–Ω–æ–≤–æ–µ –≤ v3.0)
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞
ssh deployuser@157.180.87.32 "cd /var/www/studio-app && node -e 'import(\"./src/lib/models/index.js\").then(async (db) => { const user = await db.default.User.findOne({where: {email: \"admin@taskverse.test\"}}); console.log(user ? \"Admin exists\" : \"Admin not found\"); process.exit(0); })'"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
curl -I http://157.180.87.32:3000/auth
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
psql -U userstudio -d userstudio -h localhost -c "SELECT version();"
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –°—Ç–∞—Ç—É—Å PM2
ssh deployuser@157.180.87.32 "pm2 status"

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
ssh deployuser@157.180.87.32 "pm2 logs studio-nextjs15"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I http://157.180.87.32:3000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–æ–≤–æ–µ –≤ v3.0)
curl -I http://157.180.87.32:3000/auth
```

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
ssh deployuser@157.180.87.32 "pm2 restart studio-nextjs15"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
ssh deployuser@157.180.87.32 "pm2 stop studio-nextjs15"

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
ssh deployuser@157.180.87.32 "pm2 logs studio-nextjs15 --lines 50"
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–§–∞–π–ª `.env` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
```env
NODE_ENV=production
DATABASE_URL=postgresql://userstudio:userstudio@localhost:5432/userstudio
NEXTAUTH_URL=http://157.180.87.32:3000
NEXTAUTH_SECRET=your-secret-key-here

DB_NAME=userstudio
DB_USERNAME=userstudio
DB_PASSWORD=userstudio
DB_HOST=localhost
DB_PORT=5432
DB_DIALECT=postgres
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è v3.0

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ http://157.180.87.32:3000/
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—â—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –∞–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫ clientModules

## üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (10.06.2025)

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –¥–µ–ø–ª–æ—è ‚Ññ5 - –ò–°–ü–†–ê–í–õ–ï–ù–´ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã:**

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤ 3000**
   - **–°–∏–º–ø—Ç–æ–º:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å —á–µ—Ä–µ–∑ PM2
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—ã—Ç–∞–ª–∏—Å—å –∑–∞–Ω—è—Ç—å –ø–æ—Ä—Ç 3000 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   - **–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2

2. **–û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: "column password_hash does not exist"**
   - **–°–∏–º–ø—Ç–æ–º:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞, –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö PM2
   - **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é Sequelize –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - **–ê–Ω–∞–ª–∏–∑:** –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å –æ–∂–∏–¥–∞–ª–∞ `password_hash`, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –±—ã–ª–∞ —Ç–æ–ª—å–∫–æ `password`
   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `password_hash` –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ

3. **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å PM2**
   - **–°–∏–º–ø—Ç–æ–º:** –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏, –≤—ã—Å–æ–∫–∏–π restart count
   - **–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∏ –ë–î –ø—Ä–∏–≤–æ–¥–∏–ª–∏ –∫ –ø–∞–¥–µ–Ω–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î + –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PM2

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Ä—Ç–æ–≤:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞ –ø–æ—Ä—Ç—É 3000
ssh deployuser@157.180.87.32 "netstat -tulpn | grep :3000"

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞
ssh deployuser@157.180.87.32 "lsof -ti:3000 | xargs kill -9 2>/dev/null || true"

# –û—á–∏—Å—Ç–∫–∞ PM2
ssh deployuser@157.180.87.32 "pm2 kill && pm2 flush"
```

**–ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–æ–∫ —Ç–∞–±–ª–∏—Ü—ã users
ssh deployuser@157.180.87.32 'PGPASSWORD=userstudio psql -h localhost -U userstudio -d userstudio -c "SELECT column_name FROM information_schema.columns WHERE table_name = '\''users'\'';"'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∞
ssh deployuser@157.180.87.32 'PGPASSWORD=userstudio psql -h localhost -U userstudio -d userstudio -c "SELECT email, role FROM users WHERE email = '\''admin@taskverse.test'\'';"'
```

## üö® –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH –∫–ª—é—á–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π
2. **–ë—ç–∫–∞–ø—ã**: –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –±—ç–∫–∞–ø—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
3. **–ü–æ—Ä—Ç—ã**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3000 –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ –∏ –Ω–µ –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
4. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `/var/www/studio-app`
5. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
6. **–ê–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: –î–∞–Ω–Ω—ã–µ admin@taskverse.test/password —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
7. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ë–î**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–º –º–æ–¥–µ–ª—è–º Sequelize

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ PM2: `pm2 logs studio-nextjs15`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤: `pm2 status`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
4. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ SSH
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /auth –¥–æ—Å—Ç—É–ø–Ω–∞
