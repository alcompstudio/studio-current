# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Next.js 14)

## ‚úÖ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
- **–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω** —Å Next.js 14.2.29 (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- **–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã** –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
- **55 —Å—Ç—Ä–∞–Ω–∏—Ü** —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- **–í—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã** —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–û—Ç–∫–∞—Ç —Å Next.js 15** - —Ä–µ—à–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å clientModules

## üì¶ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–µ–ø–ª–æ–π-–ø–∞–∫–µ—Ç–∞

–ê—Ä—Ö–∏–≤ `studio-deploy-nextjs14.tar.gz` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `.next/` - —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- `package-lock.json` - —Ç–æ—á–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
- `next.config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Next.js
- `.env.example` - –ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **Node.js**: 18.17+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 20.x)
- **PostgreSQL**: 12+ 
- **RAM**: 2GB+
- **–î–∏—Å–∫**: 5GB+
- **–ü–æ—Ä—Ç—ã**: 3000 (–∏–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://username:password@localhost:5432/studio_db
DB_HOST=localhost
DB_PORT=5432
DB_NAME=studio_db
DB_USER=your_username
DB_PASSWORD=your_password

# Next.js
NODE_ENV=production
PORT=3000

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
NEXTAUTH_SECRET=your-secret-key
NEXTAUTH_URL=http://your-domain.com
```

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–µ–ø–ª–æ—è

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL
sudo apt install postgresql postgresql-contrib -y

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
sudo -u postgres createuser --interactive
sudo -u postgres createdb studio_db
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p /var/www/studio
cd /var/www/studio

# –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—á–∏)
# scp studio-deploy.tar.gz user@server:/var/www/studio/
# –∏–ª–∏ wget/curl

# –†–∞—Å–ø–∞–∫–æ–≤–∫–∞
tar -xzf studio-deploy.tar.gz

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm ci --only=production
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
cp .env.example .env
nano .env

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (—Å–º. –≤—ã—à–µ)
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
npm run migrate

# –ò–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤—Ä—É—á–Ω—É—é
psql -U username -d studio_db -f database/schema.sql
```

### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
```bash
npm start
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2

# –ó–∞–ø—É—Å–∫
pm2 start npm --name "studio" -- start

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
pm2 startup
pm2 save
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: Systemd
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ service —Ñ–∞–π–ª–∞
sudo nano /etc/systemd/system/studio.service

# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ:
[Unit]
Description=Studio App
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/var/www/studio
ExecStart=/usr/bin/npm start
Restart=on-failure

[Install]
WantedBy=multi-user.target

# –ó–∞–ø—É—Å–∫
sudo systemctl enable studio
sudo systemctl start studio
```

### 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- `http://your-domain.com/` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `http://your-domain.com/orders` - –ó–∞–∫–∞–∑—ã
- `http://your-domain.com/projects` - –ü—Ä–æ–µ–∫—Ç—ã
- `http://your-domain.com/settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- `http://your-domain.com/api/orders` - API –∑–∞–∫–∞–∑–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:
```bash
# PM2
pm2 logs studio

# Systemd
sudo journalctl -u studio -f

# –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
# –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –û—à–∏–±–∫–∞ clientModules
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤ runtime
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–±—ã—á–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç
- **–ü—Ä–∏—á–∏–Ω–∞**: –û—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç Next.js 15

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å PostgreSQL

### 3. –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã
- **–ü—Ä–æ–±–ª–µ–º–∞**: Port 3000 already in use
- **–†–µ—à–µ–Ω–∏–µ**: –ò–∑–º–µ–Ω–∏—Ç—å PORT –≤ .env –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è —É –≤–∞—Å –±—É–¥–µ—Ç:
- ‚úÖ –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏  
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–ª—é—Ç, —Å—Ç–∞—Ç—É—Å–æ–≤, —Ç–∏–ø–æ–≤ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —ç—Ç–∞–ø–æ–≤ –∏ –æ–ø—Ü–∏–π –∑–∞–∫–∞–∑–æ–≤

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
